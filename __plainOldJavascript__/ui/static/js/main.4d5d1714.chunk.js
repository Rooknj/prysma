(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{194:function(e,t,n){e.exports=n(389)},389:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(14),o=n.n(i);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));n(199);var c=n(63),l=n(440),u=n(434),d=n(43),h=n(182),s=n(39),g=n(57),m=n(431),f=n(435),v=n(432),b=n(93),p=n(183),E=n(20),y=n(187),O=n(170),j=n(172),L=n(3),w=window.location.host,C="https:"===window.location.protocol?"wss:":"ws:",k=new y.a({uri:"".concat(window.location.protocol,"//").concat(w,"/graphql")}),I=new O.a({uri:"".concat(C,"//").concat(w,"/graphql"),options:{reconnect:!0}}),S=Object(E.d)(function(e){var t=e.query,n=Object(L.l)(t),a=n.kind,r=n.operation;return"OperationDefinition"===a&&"subscription"===r},I,k),R=Object(j.a)(function(e){var t=e.graphQLErrors,n=e.networkError;t&&t.map(function(e){var t=e.message,n=e.locations,a=e.path;return console.error("[GraphQL error]: Message: ".concat(t,", Location: ").concat(n,", Path: ").concat(a))}),n&&console.error("[Network error]: ".concat(n))}),D=new p.a,A=new b.a({link:E.a.from([R,S]),cache:D}),P=n(18),x=n(438),F=n(424),N=n(26),q=n.n(N);function $(){var e=Object(P.a)(["\n  query discoveredLights {\n    discoveredLights {\n      ...lightFields\n    }\n  }\n  ","\n"]);return $=function(){return e},e}function _(){var e=Object(P.a)(["\n  mutation removeLight($lightId: String!) {\n    removeLight(lightId: $lightId) {\n      ...lightFields\n    }\n  }\n  ","\n"]);return _=function(){return e},e}function Q(){var e=Object(P.a)(["\n  mutation addLight($lightId: String!, $lightData: LightInput) {\n    addLight(lightId: $lightId, lightData: $lightData) {\n      ...lightFields\n    }\n  }\n  ","\n"]);return Q=function(){return e},e}function U(){var e=Object(P.a)(["\n  mutation setLightState($lightId: String!, $lightState: LightStateInput!) {\n    setLightState(lightId: $lightId, lightState: $lightState) {\n      ...lightStateFields\n    }\n  }\n  ","\n"]);return U=function(){return e},e}function V(){var e=Object(P.a)(["\n  mutation setLight($lightId: String!, $lightData: LightInput!) {\n    setLight(lightId: $lightId, lightData: $lightData) {\n      ...lightFields\n    }\n  }\n  ","\n"]);return V=function(){return e},e}function W(){var e=Object(P.a)(["\n  query lights {\n    lights {\n      ...lightFields\n      state {\n        ...lightStateFields\n      }\n    }\n  }\n  ","\n  ","\n"]);return W=function(){return e},e}function B(){var e=Object(P.a)(["\n  query light($lightId: String!) {\n    light(lightId: $lightId) {\n      ...lightFields\n      state {\n        ...lightStateFields\n      }\n    }\n  }\n  ","\n  ","\n"]);return B=function(){return e},e}function T(){var e=Object(P.a)(["\n  subscription lightStateChanged {\n    lightStateChanged {\n      ...lightStateFields\n    }\n  }\n  ","\n"]);return T=function(){return e},e}function M(){var e=Object(P.a)(["\n  subscription lightChanged {\n    lightChanged {\n      ...lightFields\n    }\n  }\n  ","\n"]);return M=function(){return e},e}function H(){var e=Object(P.a)(["\n  subscription lightRemoved {\n    lightRemoved {\n      ...lightFields\n    }\n  }\n  ","\n"]);return H=function(){return e},e}function J(){var e=Object(P.a)(["\n  subscription lightAdded {\n    lightAdded {\n      ...lightFields\n      state {\n        ...lightStateFields\n      }\n    }\n  }\n  ","\n  ","\n"]);return J=function(){return e},e}function G(){var e=Object(P.a)(["\n  fragment lightStateFields on LightState {\n    id\n    connected\n    on\n    brightness\n    color {\n      r\n      g\n      b\n    }\n    effect\n    speed\n  }\n"]);return G=function(){return e},e}function z(){var e=Object(P.a)(["\n  fragment lightFields on Light {\n    id\n    name\n    supportedEffects\n    ipAddress\n    macAddress\n    numLeds\n    udpPort\n    version\n    hardware\n    colorOrder\n    stripType\n  }\n"]);return z=function(){return e},e}var K=q()(z()),X=q()(G()),Y=q()(J(),K,X),Z=q()(H(),K),ee=q()(M(),K),te=q()(T(),X),ne=q()(B(),K,X),ae=q()(W(),K,X),re=q()(V(),K),ie=q()(U(),X),oe=q()(Q(),K),ce=q()(_(),K),le=q()($(),K),ue=function(e,t){try{var n=e.readQuery({query:le}).discoveredLights;n.length>0&&e.writeQuery({query:le,data:{discoveredLights:n.filter(function(e){return e.id!==t.id})}})}catch(a){if("Invariant Violation"===a.name)return;throw a}},de=function(e,t){try{var n=e.readQuery({query:ae}).lights;if(n.find(function(e){return e.id===t.id}))return;e.writeQuery({query:ae,data:{lights:n.concat([t])}})}catch(a){if("Invariant Violation"===a.name)return;throw a}},he=function(e,t){try{var n=e.readQuery({query:ae}).lights;e.writeQuery({query:ae,data:{lights:n.filter(function(e){return e.id!==t.id})}})}catch(a){if("Invariant Violation"===a.name)return;throw a}},se=function(){var e=Object(x.a)(ae,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0});return Object(F.a)(ee),Object(F.a)(te),Object(F.a)(Y,{onSubscriptionData:function(e){var t=e.client,n=e.subscriptionData;if(n.data&&n.data.lightAdded){var a=n.data.lightAdded;a&&(ue(t,a),de(t,a))}}}),Object(F.a)(Z,{onSubscriptionData:function(e){var t=e.client,n=e.subscriptionData;if(n.data&&n.data.lightRemoved){var a=n.data.lightRemoved;a&&he(t,a)}}}),e},ge=n(188),me=n(425),fe=n(95),ve="test"===Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_ENV?0:500,be=function(){var e=Object(me.a)(ie),t=r.a.useRef(Object(fe.throttle)(e,ve)).current;return function(e,n){var a,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;if(r&&0===Object.entries(r).length){var i=Object.assign({},r.color,n.color);a={__typename:"Mutation",setLightState:Object(ge.a)({__typename:"LightState"},r,n,{color:i})}}return t({variables:{lightId:e,lightState:n},optimisticResponse:a})}},pe="test"===Object({NODE_ENV:"production",PUBLIC_URL:""}).REACT_APP_ENV?0:500,Ee=function(){var e=Object(me.a)(re),t=r.a.useRef(Object(fe.throttle)(e,pe)).current;return function(e,n){return t({variables:{lightId:e,lightData:n}})}},ye=function(){return Object(x.a)(le,{fetchPolicy:"cache-and-network",pollInterval:3e3})},Oe=function(){var e=Object(me.a)(oe),t=function(e,t){var n=t.data;n.addLight&&(ue(e,n.addLight),de(e,n.addLight))};return function(n,a){return e({variables:{lightId:n,lightData:a},update:t})}},je=function(){var e=Object(me.a)(ce),t=function(e,t){var n=t.data;n.removeLight&&he(e,n.removeLight)};return function(n,a){return e({variables:{lightId:n,lightData:a},update:t})}},Le=function(e){var t=Object(x.a)(ne,{fetchPolicy:"cache-and-network",notifyOnNetworkStatusChange:!0,variables:{lightId:e}});return Object(F.a)(ee),Object(F.a)(te),t},we=n(426),Ce=n(428),ke=n(437);function Ie(){var e=Object(P.a)(["\n  display: flex;\n  align-items: center;\n"]);return Ie=function(){return e},e}var Se=d.b.div(Ie()),Re=function(){var e,t=se(),n=t.data,a=t.error,i=t.loading,o=t.networkStatus,c=t.refetch,l=be(),u=je(),d=function(e){return function(t){u(e.id)}};return e=i||4===o?r.a.createElement(we.a,{variant:"body1"},"Loading..."):a?r.a.createElement(we.a,{variant:"body1"},"Error."):n.lights.length?n.lights.map(function(e){return r.a.createElement(Se,{key:e.id},r.a.createElement(Ce.a,{onClick:d(e)},"Remove"),r.a.createElement(ke.a,{checked:e.state.on,onChange:(t=e.state,function(e){var n={on:e.target.checked};l(t.id,n,t)}),disabled:!e.state.connected,color:"primary"}),r.a.createElement(s.b,{to:"/light/".concat(e.id)},r.a.createElement(we.a,{variant:"body1"},e.name)));var t}):r.a.createElement(we.a,{variant:"body1"},"None"),r.a.createElement("div",null,r.a.createElement(we.a,{variant:"h4"},"Prysma"),r.a.createElement(Ce.a,{onClick:function(){return c()}},"Refetch"),r.a.createElement(we.a,{variant:"h6"},"Light List"),e)},De=function(){return r.a.createElement("div",null,"TODO")},Ae=n(59),Pe=n(433);function xe(){var e=Object(P.a)(["\n  display: flex;\n  align-items: center;\n"]);return xe=function(){return e},e}var Fe=d.b.div(xe()),Ne=function(){var e,t=r.a.useState(""),n=Object(Ae.a)(t,2),a=n[0],i=n[1],o=Oe(),c=ye().data;return e=c.discoveredLights?c.discoveredLights.length?c.discoveredLights.map(function(e){return r.a.createElement(Fe,{key:e.id},r.a.createElement(Ce.a,{onClick:(t=e.id,function(){o(t)})},"Add"),r.a.createElement(we.a,{variant:"body1"},e.id));var t}):r.a.createElement(we.a,{variant:"body1"},"None"):r.a.createElement(we.a,{variant:"body1"},"Loading..."),r.a.createElement("div",null,r.a.createElement(we.a,{variant:"h4"},"Add Light"),r.a.createElement(Fe,null,r.a.createElement(Ce.a,{onClick:function(){o(a).then(function(){i("")})}},"Add"),r.a.createElement(Pe.a,{placeholder:"New Light ID",value:a,onChange:function(e){i(e.target.value)}})),r.a.createElement(we.a,{variant:"h6"},"Discovered Lights"),e)},qe=n(186),$e=n(430);function _e(){var e=Object(P.a)(["\n  padding-top: 1rem;\n  padding-bottom: 1rem;\n"]);return _e=function(){return e},e}var Qe=Object(d.b)($e.a)(_e()),Ue=function(e){var t=e.value,n=e.onChange,a=Object(qe.a)(e,["value","onChange"]),i=r.a.useState(t),o=Object(Ae.a)(i,2),c=o[0],l=o[1];r.a.useEffect(function(){l(t)},[t]);return r.a.createElement(Qe,Object.assign({value:c,onChange:function(e,t){l(t),n(t)}},a))};Ue.defaultProps={onChange:function(){}};var Ve=Ue,We=n(177),Be=n(178),Te=n(184),Me=n(179),He=n(189),Je=n(180),Ge=n(181),ze=function(e){function t(e){var n;return Object(We.a)(this,t),(n=Object(Te.a)(this,Object(Me.a)(t).call(this,e))).onIroChange=function(e){var t=n.props,a=t.hex,r=t.onChange;a!==e.hexString&&r(e.hexString)},n.myRef=r.a.createRef(),n}return Object(He.a)(t,e),Object(Be.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.hex,n=e.height,a=e.width;this.colorWheel=new Ge.a.ColorPicker(this.myRef.current,{color:t,height:n||320,width:a||320}),this.colorWheel.on("color:change",this.onIroChange)}},{key:"shouldComponentUpdate",value:function(e){return this.props.hex!==e.hex}},{key:"componentDidUpdate",value:function(e){var t=this.props.hex;t!==e.hex&&(this.colorWheel.color.hexString=t)}},{key:"componentWillUnmount",value:function(){this.colorWheel.off("color:change",this.onIroChange)}},{key:"render",value:function(){return r.a.createElement("div",{className:"ColorWheel",ref:this.myRef})}}]),t}(r.a.Component);ze.defaultProps={height:320,width:320};var Ke=Object(Je.CustomPicker)(ze),Xe=n(4),Ye=n.n(Xe),Ze=Ye.a.shape({r:Ye.a.number.isRequired,g:Ye.a.number.isRequired,b:Ye.a.number.isRequired}),et=Ye.a.shape({id:Ye.a.string.isRequired,connected:Ye.a.bool,on:Ye.a.bool,brightness:Ye.a.number,color:Ze,effect:Ye.a.string,speed:Ye.a.number});Ye.a.shape({id:Ye.a.string.isRequired,name:Ye.a.string,supportedEffects:Ye.a.arrayOf(Ye.a.string),ipAddress:Ye.a.string,macAddress:Ye.a.string,numLeds:Ye.a.number,udpPort:Ye.a.number,version:Ye.a.string,hardware:Ye.a.string,colorOrder:Ye.a.string,stripType:Ye.a.string,state:et}),Ye.a.object,Ye.a.object;function tt(){var e=Object(P.a)(["\n  display: flex;\n  align-items: center;\n"]);return tt=function(){return e},e}var nt=d.b.div(tt()),at=function(e){var t=e.match,n=r.a.useState(""),a=Object(Ae.a)(n,2),i=a[0],o=a[1],c=r.a.useState(!1),l=Object(Ae.a)(c,2),u=l[0],d=l[1],h=t.params.id,m=Le(h),f=m.data,v=m.error,b=m.loading,p=Ee(),E=be(),y=je();console.log(f,v,b);var O,j;if(b)O=r.a.createElement(we.a,{variant:"body1"},"Loading...");else if(v)O=r.a.createElement(we.a,{variant:"body1"},"Error.");else{var L=f.light,w=L.id,C=L.name,k=L.supportedEffects,I=L.ipAddress,S=L.macAddress,R=L.numLeds,D=L.udpPort,A=L.version,P=L.hardware,x=L.colorOrder,F=L.stripType,N=L.state,q=N.connected,$=N.on,_=N.brightness,Q=N.color,U=N.effect,V=N.speed;O=r.a.createElement("div",null,r.a.createElement(we.a,{variant:"h3"},L.name),r.a.createElement(we.a,{variant:"h6"},"Rename the light: "),r.a.createElement(Pe.a,{placeholder:"New Light Name",value:i,color:"primary",onChange:function(e){o(e.target.value)}}),r.a.createElement(Ce.a,{onClick:function(){p(h,{name:i}).then(function(){o("")})},color:"primary"},"Rename"),r.a.createElement(we.a,{variant:"h6"},"Connected: ".concat(q)),r.a.createElement(nt,null,r.a.createElement(we.a,{variant:"h6"},"On: "),r.a.createElement(ke.a,{checked:$,onChange:(j=L.state,function(e){var t={on:e.target.checked};E(j.id,t,j)}),disabled:!q,color:"primary"})),r.a.createElement(we.a,{variant:"h6"},"Brightness: "),r.a.createElement(Ve,{value:_,min:0,max:100,step:1,onChange:function(e){return function(t){var n={brightness:t};E(e.id,n,e)}}(L.state),disabled:!q,color:"primary"}),r.a.createElement(we.a,{variant:"h6"},"Color: "),r.a.createElement(Ke,{color:Q,onChange:function(e){return function(t){var n=t.rgb,a={color:{r:n.r,g:n.g,b:n.b}};E(e.id,a,e)}}(L),height:320,width:320}),r.a.createElement(we.a,{variant:"h6"},"Current Effect: ".concat(U)),k&&k.map(function(e){return r.a.createElement(Ce.a,{key:e,disabled:!q,color:"primary",onClick:(t=e,n=L,function(){var e={effect:t};E(n.id,e,n)})},e);var t,n}),r.a.createElement(we.a,{variant:"h6"},"Effect Speed:"),r.a.createElement(Ve,{value:V,min:1,max:7,step:1,onChange:function(e){return function(t){var n={speed:t};E(e.id,n,e)}}(L.state),color:"primary",disabled:!q}),r.a.createElement(we.a,{variant:"h6"},"Config Info:"),r.a.createElement(we.a,{variant:"body1"},"ID: ".concat(w)),r.a.createElement(we.a,{variant:"body1"},"Name: ".concat(C)),r.a.createElement(we.a,{variant:"body1"},"IP Address: ".concat(I)),r.a.createElement(we.a,{variant:"body1"},"MAC Address: ".concat(S)),r.a.createElement(we.a,{variant:"body1"},"Number of LEDs: ".concat(R)),r.a.createElement(we.a,{variant:"body1"},"UDP Port: ".concat(D)),r.a.createElement(we.a,{variant:"body1"},"Version: ".concat(A)),r.a.createElement(we.a,{variant:"body1"},"Hardware: ".concat(P)),r.a.createElement(we.a,{variant:"body1"},"Color Order: ".concat(x)),r.a.createElement(we.a,{variant:"body1"},"Strip Type: ".concat(F)),r.a.createElement(we.a,{variant:"h6"},"Remove the light: "),r.a.createElement(Ce.a,{onClick:function(){y(h).then(function(){return d(!0)})},color:"primary"},"Remove"),u&&r.a.createElement(g.a,{push:!0,to:"/"}))}return r.a.createElement("div",null,r.a.createElement(s.b,{to:"/"},r.a.createElement(Ce.a,null,"< Back")),O)},rt=function(e){var t=e.location;return r.a.createElement("div",null,r.a.createElement(s.b,{to:"/"},r.a.createElement(we.a,{variant:"body1"},"< Back to main")),r.a.createElement(we.a,{variant:"h2"},"No Match For ".concat(t.pathname)))},it=Object(h.a)(),ot=function(){return r.a.createElement(c.a,{client:A},r.a.createElement(u.b,{injectFirst:!0},r.a.createElement(d.a,{theme:it},r.a.createElement(s.a,null,r.a.createElement(l.a,null,r.a.createElement(m.a,{position:"static"},r.a.createElement(f.a,null,r.a.createElement(v.a,{label:"Home",component:s.b,to:"/"}),r.a.createElement(v.a,{label:"Add Light",component:s.b,to:"/addLight/"}),r.a.createElement(v.a,{label:"About",component:s.b,to:"/about/"}))),r.a.createElement(g.d,null,r.a.createElement(g.b,{path:"/",exact:!0,component:Re}),r.a.createElement(g.b,{path:"/about/",exact:!0,component:De}),r.a.createElement(g.b,{path:"/addLight/",exact:!0,component:Ne}),r.a.createElement(g.b,{path:"/light/:id",exact:!0,component:at}),r.a.createElement(g.b,{component:rt})))))))};o.a.render(r.a.createElement(ot,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[194,1,2]]]);
//# sourceMappingURL=main.4d5d1714.chunk.js.map